# Chapter 24. 클로저

## Index

[24.1 렉시컬 스코프](#1)<br>
[24.2 함수 객체의 내부 슬롯 [[Environment]]](#2)<br>
[24.3 클로저와 렉시컬 환경](#3)<br>
[24.4 클로저의 활용](#4)<br>
[24.5 캡슐화와 정보 은닉](#5)<br>
[24.6 자주 발생하는 실수](#5)<br>

<br>

**_MDN에서의 클로저 정의_**

- 클로저는 함수와 그 함수가 선언된 렉시컬 환경과의 조합

---

<br>

## 24.1 렉시컬 스코프<a id="1"></a>

- **렉시컬 스코프(정적 스코프)**
  - JS 엔진은 함수의 호출 위치가 아닌 **정의한 위치**에 따라 상위 스코프를 결정
  - 스코프의 실체는 실행 컨텍스트의 렉시컬 환경
  - *외부 렉시컬 환경에 대한 참조*를 통해 상위 렉시컬 환경과 연결되어 **스코프 체인** 만들어짐

---

<br>

## 24.2 함수 객체의 내부 슬롯 [[Environment]]<a id="2"></a>

- `[[Environment]] 값` --> `Outer Lexical Environment Reference 값`
- 함수는 **[[Environment]]** 에 자신이 **정의된 환경 (상위 스코프 참조)** 를 저장
- [[Environment]]에 저장된 참조값은 자신이 호출될 때 *Outer Lexical Environment Reference*에 저장

---

<br>

## 24.3 클로저와 렉시컬 환경<a id="3"></a>

- **클로저**
  - 외부함수보다 중첩 함수가 더 오래 유지되는 경우
  - 이 때, 중첩 함수는 이미 생명 주기가 종료한 외부 함수의 변수를 참조 가능
  - 이런 중첩 함수를 *클로저*라고 함

<br>

**_클로저라고 칭하는 경우_**

- 조건 1) **중첩함수가 상위 스코프의 식별자를 참조**
- 조건 2) **중첩 함수가 외부 함수보다 더 오래 유지**

<br>

```js
const x = 1;

function outer() {
  const x = 10;
  const inner = function () {
    console.log(x);
  };

  return inner;
}

const innerFunc = outer();
innerFunc(); // 10;
```

- 모든 함수는 자신의 상위 스코프를 기억
- 어디서 호출하든 함수는 언제나 상위 스코프의 식별자를 참조 가능
- outer 함수의 실행 컨텍스트가 제거되어도 렉시컬 환경은 존재 가능
  - 다른 값이 outer 함수를 참조하고 있다면 GC의 대상이 아님

<br>

tip: **함수 표현식**은 **런타임에 평가**됨

---

<br>

## 24.4 클로저의 활용<a id="4"></a>

- 클로저는 **상태를 안전하게 변경하고 유지**하기 위해 사용
- 즉, **상태를 안전하게 은닉**하고 **특정 함수에게만 상태 변경을 허용**

---

<br>

## 24.5 캡슐화와 정보 은닉<a id="5"></a>

---

<br>

## 24.6 자주 발생하는 실수<a id="5"></a>
